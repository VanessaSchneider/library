(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{22:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(15),s=n.n(o),r=(n(22),n(14)),a=n(3),i=n(0);var u=function(e){var t=e.onLogin,n=Object(c.useState)(!1),o=Object(a.a)(n,2),s=o[0],r=o[1],u=Object(c.useState)(""),j=Object(a.a)(u,2),l=j[0],b=j[1],h=Object(c.useState)(""),d=Object(a.a)(h,2),O=d[0],f=d[1],m=Object(i.jsx)("div",{children:Object(i.jsx)("div",{className:"login",children:Object(i.jsx)("form",{onSubmit:function(e){e.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:l,password:O})}).then((function(e){return e.json()})).then((function(e){return e.username?t(e):alert(e.error)})),b(""),f("")},children:Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"mb-3"}),Object(i.jsx)("input",{type:"text",value:l,onChange:function(e){return b(e.target.value)},placeholder:"Username"}),Object(i.jsx)("div",{className:"mb-3",children:Object(i.jsx)("input",{type:"password",value:O,onChange:function(e){return f(e.target.value)},placeholder:"Password"})}),Object(i.jsx)("input",{type:"submit",className:"btn btn-outline-light"})]})})})});return Object(i.jsx)("div",{className:"login-button",children:Object(i.jsxs)("nav",{children:[Object(i.jsx)("button",{type:"button",onClick:function(){return r(!s)},children:"Login"}),s?m:null]})})};var j=function(e){e.login;var t=Object(c.useState)(!1),n=Object(a.a)(t,2),o=n[0],s=n[1],r=Object(c.useState)(""),u=Object(a.a)(r,2),j=u[0],l=u[1],b=Object(c.useState)(""),h=Object(a.a)(b,2),d=h[0],O=h[1],f=Object(c.useState)(""),m=Object(a.a)(f,2),x=m[0],p=m[1],v=Object(i.jsx)("div",{className:"signup",children:Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:j,password:d,passwordConfirmation:x})}).then((function(e){return e.json()})).then((function(e){e.errors?e.errors.forEach((function(e){return"Age must be greater than or equal to 18"===e?alert("Must be 18 or older"):alert(e)})):(s(!1),l(""),O(""),p(""),alert("Profile Successfully Created! Please Log In."))}))},children:[Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"text",value:j,onChange:function(e){return l(e.target.value)},placeholder:"username"})}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"password",value:d,onChange:function(e){return O(e.target.value)},placeholder:"password"})}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"password",value:x,onChange:function(e){return p(e.target.value)},placeholder:"password confirmation"})}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"submit",className:"btn btn-outline-light"})})]})});return Object(i.jsx)("div",{className:"signup-button",children:Object(i.jsxs)("nav",{children:[Object(i.jsx)("button",{type:"button",onClick:function(){return s(!o)},children:"Sign Up"}),o?v:null]})})};var l=function(e){var t=e.handleLogout;return Object(i.jsx)("header",{children:Object(i.jsx)("button",{type:"button",className:"logout-button",onClick:t,children:"Logout"})})},b=n(2),h=n(6);var d=function(e){var t=e.book,n=e.handleReturnBook,c=e.handleAddBook;return Object(i.jsx)("div",{className:"catTile2",children:Object(i.jsxs)("div",{className:"centered2",children:[t.name,Object(i.jsx)("br",{}),t.author,Object(i.jsx)("img",{img:!0,className:"book-size",src:t.photo}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsx)("button",{onClick:function(){c(t),n(t.id),fetch("/books/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:0})}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))},children:"Return Book"})]})})};var O=function(e){var t=e.checkedBooks,n=e.handleReturnBook,o=e.handleAddBook,s=Object(c.useState)(""),r=Object(a.a)(s,2),u=r[0],j=(r[1],[]);return t&&0!==t&&(j=t.map((function(e){return Object(i.jsx)(d,{book:e,handleReturnBook:n,handleAddBook:o},e.name)}))),Object(i.jsxs)("div",{children:[Object(i.jsxs)("h1",{className:"centered2",children:["Hello ",u.username]}),Object(i.jsx)("h2",{className:"centered3",children:"Books You Have Checked Out"}),j]})};var f=function(e){var t=e.handleCheckOutBook,n=e.handleDeleteBook,o=Object(c.useState)(""),s=Object(a.a)(o,2),r=s[0],u=s[1],j=Object(c.useState)(""),l=Object(a.a)(j,2),d=l[0],O=l[1],f=(Object(b.f)(),{name:Object(b.h)().name});return Object(c.useEffect)((function(){fetch("/getbook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(e){return u(e)}))}),[]),Object(c.useEffect)((function(){fetch("/me").then((function(e){e.ok&&e.json().then((function(e){return O(e)}))}))}),[]),console.log(r),Object(i.jsxs)("div",{className:"centered2",children:[r.name,Object(i.jsx)("br",{}),r.author,Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsx)("img",{img:!0,className:"big-size",src:r.photo}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsx)(h.b,{to:"/users/".concat(d.username),children:Object(i.jsxs)("button",{onClick:function(){t(r),n(r.id),fetch("/books/".concat(r.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:d.id})}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))},className:"checkout",children:[" ","Check Out This Book"," "]})})]})};var m=function(e){var t=e.book;return Object(i.jsx)("div",{className:"catTile",children:Object(i.jsxs)("div",{className:"centered",children:[Object(i.jsx)(h.b,{to:"/books/".concat(t.name),children:t.name}),Object(i.jsx)("br",{}),t.author,Object(i.jsx)("img",{img:!0,className:"book-size",src:t.photo})]})})};var x=function(e){var t=e.books.map((function(e){return Object(i.jsx)(m,{book:e},e.name)}));return Object(i.jsx)("div",{children:t})};var p=function(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),n=t[0],o=t[1],s=Object(c.useState)([]),d=Object(a.a)(s,2),m=d[0],p=d[1],v=Object(c.useState)([]),g=Object(a.a)(v,2),k=g[0],y=g[1],N=Object(b.f)(),C=Object(b.g)();return Object(c.useEffect)((function(){fetch("/me").then((function(e){e.ok&&e.json().then((function(e){return o(e)}))}))}),[]),console.log("location",C.pathname),console.log(m),Object(c.useEffect)((function(){fetch("/getbooks").then((function(e){return e.json()})).then((function(e){return p(e)}))}),[]),console.log("books",m),Object(c.useEffect)((function(){fetch("/getCheckedBooks").then((function(e){return e.json()})).then((function(e){return y(e)}))}),[]),Object(i.jsx)("div",{children:Object(i.jsxs)("div",{children:[Object(i.jsxs)("nav",{className:"nav",children:[n?null:Object(i.jsx)(j,{onLogin:o,login:function(e,t){fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then((function(e){return e.json()})).then((function(e){return n.username?o(e):null}))}}),n?Object(i.jsx)(l,{handleLogout:function(){fetch("/logout",{method:"DELETE"}).then((function(){return o()})).then((function(){return console.log("Reroute!"),void N.push("/")}))}}):Object(i.jsx)(u,{onLogin:o}),n?Object(i.jsx)("div",{}):null,n&&"/"!==C.pathname?Object(i.jsx)("div",{className:"home-button",children:Object(i.jsx)(h.b,{to:"/",children:Object(i.jsx)("button",{children:"Home"})})}):null,n&&C.pathname!=="/users/".concat(n.username)?Object(i.jsx)("div",{className:"signup-button",children:Object(i.jsx)(h.b,{to:"/users/".concat(n.username),children:Object(i.jsx)("button",{children:"My Checked Out Books"})})}):null]}),Object(i.jsxs)(b.c,{children:[Object(i.jsxs)(b.a,{exact:!0,path:"/",children:[Object(i.jsx)("div",{children:n?Object(i.jsxs)("div",{children:[Object(i.jsxs)("h1",{className:"centered2",children:["Welcome to the Library, ",n.username]}),Object(i.jsx)("h2",{className:"centered3",children:"Would you like to check out any of these books?"}),Object(i.jsx)("h2",{className:"centered3",children:"Sorry we only have 1 copy of each book"})]}):Object(i.jsx)("h1",{className:"centered",children:"Welcome to the Little Library"})}),n?Object(i.jsx)(x,{books:m}):null]}),Object(i.jsx)(b.a,{exact:!0,path:"/books/:name",children:Object(i.jsx)(f,{user:n,handleCheckOutBook:function(e){y([].concat(Object(r.a)(k),[e]))},handleDeleteBook:function(e){var t=m.filter((function(t){return t.id!==e}));p(t)}})}),Object(i.jsx)(b.a,{exact:!0,path:"/users/:username",children:Object(i.jsx)(O,{checkedBooks:k,handleReturnBook:function(e){var t=k.filter((function(t){return t.id!==e}));y(t)},handleAddBook:function(e){p([].concat(Object(r.a)(m),[e]))}})})]})]})})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),s(e),r(e)}))};s.a.render(Object(i.jsx)(h.a,{children:Object(i.jsx)(p,{})}),document.getElementById("root")),v()}},[[32,1,2]]]);
//# sourceMappingURL=main.85c33d01.chunk.js.map